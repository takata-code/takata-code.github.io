(()=>{function e(e){return String(e).replace(/[&'`"<>]/g,(e=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[e])))}const n=document.getElementById("webpageWrapper");let t=n.firstElementChild;const o=document.getElementById("inspectorWrapper"),r=document.getElementById("inspectorResizeKnob"),c=document.getElementById("inspectorTabHeaders"),i=document.getElementById("inspectorTabContents"),s=document.getElementById("inspectorConsoleClear"),l=document.getElementById("inspectorConsoleRows"),a=document.getElementById("inspectorConsoleInput"),d=new class{#e=new Map;assert(){}clear(){l.innerHTML=""}count(e){"string"!=typeof e&&(e="default"),this.#e.has(e)||this.#e.set(e,0);const n=this.#e.get(e)+1;this.#e.set(e,n),this.log(`${e}: ${n}`)}countReset(e){"string"!=typeof e&&(e="default"),this.counter.set(e,0)}dir(e){this.log(e)}error(...e){this.#n(e,{type:"error"})}warn(...e){this.#n(e,{type:"warn"})}log(...e){this.#n(e)}inputCommand(...e){this.#n(e,{type:"input"})}outputCommand(...e){this.#n(e,{type:"output"})}group(){}groupEnd(){}toString(){return"[object InspectorConsole]"}#n(e,n={}){const t=this.#t(e[0]);this.#o(t,n),l.scrollTo(0,1e8)}#t(n){const t=[n];let o=0;return function r(c,i){if("object"!=typeof c){switch(typeof c){case"string":i.label+=c==n?e(c):`<span style="color:#944306">"${e(c)}"</span>`;break;case"number":i.label+=`<span style="color:#318a04">${c}</span>`;break;case"function":i.label+='<span style="color:#630973">function()</span>';break;case"boolean":i.label+=`<span style="color:#0841bd">${c}</span>`;break;default:i.label+=`<span style="color:#910707">${c}</span>`}return i}Array.isArray(c)?i.label+=`Array<span style="color:gray">[<span style="color:#580abf">${c.length}</span>]</span>`:i.label+=c?`<span style="color:#026951">${e(c[Symbol.toStringTag])||"Object"}</span>`:'<span style="color:#910707">null</span>';for(const n in c){let s;try{s=c[n]}catch{continue}const l={label:`${e(n)}<span style="color: gray">:</span> `,children:[]};if(i.children.push(l),o++>1e3)return l.label+='<span style="color: gray">... (表示数超過)</span>',i;if(s&&"object"==typeof s){if(t.includes(s)){l.label+='<span style="color: gray">(循環参照検出)</span>';continue}t.push(s)}r(s,l)}return i}(n,{label:"",children:[]})}#o(e,n={}){const t=document.createElement("div");t.className="inspector-console-row",this.#r(t,n),function e(n,t){const o=document.createElement("div"),r=document.createElement("span");if(r.innerHTML=n.label,o.appendChild(r),0!=n.children.length){const t=document.createElement("span");t.className="inspector-console-toggle",t.innerText="expand_circle_right",o.appendChild(t);const r=document.createElement("div");r.style.marginLeft="20px",r.hidden=!0;for(const t of n.children)e(t,r);o.appendChild(r),t.addEventListener("click",(()=>{r.hidden=!r.hidden;const e=!r.hidden;t.innerText=e?"expand_circle_down":"expand_circle_right"}))}t.appendChild(o)}(e,t),l.appendChild(t)}#r(e,n){const t=document.createElement("span");switch(t.className="inspector-console-row-icon",e.appendChild(t),n.type){case"error":t.innerText="cancel",t.style.color="#ba1b09",e.style.background="#fcc4bd";break;case"warn":t.innerText="warning",t.style.color="#9c7a0b",e.style.background="#e8e4b7";break;case"input":t.innerText="chevron_right",t.style.color="gray";break;case"output":t.innerText="chevron_left",t.style.color="gray"}}};(function(){const e=new URLSearchParams(document.location.search).get("blobid");if(e){n.innerHTML=`<iframe class="webpage-frame" src="${"blob:https://takaon.net/"+e}"></iframe>`,t=n.firstElementChild,t.contentWindow.console=d;const o=Symbol("onerrorIdentifier"),r=Symbol("onunhandledrejectionIdentifier");t.contentWindow[o]=window.onerror,t.contentWindow[r]=window.onunhandledrejection,t.contentWindow.onerror=(...e)=>{t.contentWindow[o](...e)},t.contentWindow.onunhandledrejection=(...e)=>{t.contentWindow[r](...e)}}})(),function(){function e(e){n.style.width=window.innerWidth-e+"px",o.style.width=`${e}px`}const t=n=>{const t=n.clientX;e(window.innerWidth-t)};r.addEventListener("pointerdown",(e=>{window.addEventListener("pointermove",t)})),window.addEventListener("pointerup",(()=>{window.removeEventListener("pointermove",t)})),window.addEventListener("resize",(n=>{e(.3*window.innerWidth)})),e(.3*window.innerWidth)}(),function(){for(let e=0;e<c.children.length;e++)c.children[e].addEventListener("click",(()=>{for(const e of c.children)e.style.borderColor="#888888";for(const e of i.children)e.hidden=!0;c.children[e].style.borderColor="#009488",i.children[e].hidden=!1}));c.children[0].click(),s.addEventListener("click",(()=>{d.clear()})),a.addEventListener("keydown",(e=>{if("Enter"==e.key){const n=a.value;d.inputCommand(n);try{const e=t.contentWindow.eval(n);d.outputCommand(e)}catch(e){d.error(`エラー: 「${n}」(${e.message})`)}a.value=""}}))}()})();